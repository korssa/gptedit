<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>About Us - GPTXGONGMYUNG.COM</title>
  <link rel="icon" href="/favicon.ico">
  <style>
    body { font-family: sans-serif; background: #222; color: #fff; margin: 0; }
    header { background: #1a3a4a; padding: 1.5rem 1rem; text-align: center; }
    nav { background: #18324a; text-align: center; padding: 0.6rem 0; }
    nav a { color: #fff; text-decoration: none; font-weight: bold; font-size: 1rem; display: inline-block; margin: 0 0.6rem; }
    main { max-width: 880px; margin: 1.2rem auto 2rem; background: #2a4155; border-radius: 1rem; padding: 1.2rem; box-shadow: 0 2px 8px #0004; }
    h1 { margin: 0.2rem 0 0.6rem; font-size: 1.6rem; letter-spacing: 1px; }
    .list { list-style: none; padding: 0; margin: 0.5rem 0; }
    .list li { padding: 0.55rem 0.4rem; border-bottom: 1px solid #3b5670; }
    .list a { color: #b5e0ff; text-decoration:none; font-weight:bold; }
    .list a:hover { text-decoration:underline; }
    .detail { background:#18324a; border-radius: 0.7rem; padding: 0.9rem; margin-top: 1rem; }
    .title { font-weight: 800; color:#ffd78a; }
    .meta { font-size: 0.9rem; color: #d9f1ff; opacity: 0.85; margin: 0.2rem 0 0.6rem; }
    .content { white-space: pre-wrap; line-height: 1.5; }
  </style>
</head>
<body>
  <header>
    <h1>ABOUT US</h1>
  </header>
  <nav>
    <a href="/static-fallback/index.html">HOME</a>
    <a href="/static-fallback/gallery.html">EXHIBITION</a>
    <a href="/static-fallback/about.html">ABOUT US</a>
    <a href="/static-fallback/contact.html">CONTACT US</a>
  </nav>
  <main>
    <p style="color:#b5e0ff;margin:0.3rem 0 0.9rem;">Recent memos as text list.</p>
    <ul id="memoList" class="list" aria-live="polite"></ul>

    <div id="memoDetail" class="detail" style="display:none;">
      <div class="title" id="memoTitle"></div>
      <div class="meta" id="memoMeta"></div>
      <div class="content" id="memoContent"></div>
    </div>
  </main>
  <footer>
    &copy; 2025 GPTXGONGMYUNG. All rights reserved.
  </footer>
  <script>
    (function(){
      var list = document.getElementById('memoList');
      var box = document.getElementById('memoDetail');
      var t = document.getElementById('memoTitle');
      var m = document.getElementById('memoMeta');
      var c = document.getElementById('memoContent');

      function showDetail(item){
        if (!item) return;
        t.textContent = item.title || 'Untitled';
        var date = item.publishDate ? new Date(item.publishDate) : null;
        m.textContent = (item.author || 'Unknown') + (date ? ' â€¢ ' + date.toISOString().split('T')[0] : '');
        c.textContent = item.content || '';
        box.style.display = 'block';
        window.scrollTo(0, box.offsetTop - 10);
      }

      list.innerHTML = '<li style="color:#b5e0ff;text-align:center;">Loading...</li>';
      fetch('/api/memo?published=true', { cache: 'no-store' })
        .then(function(res){ return res.ok ? res.json() : []; })
        .then(function(items){
          if (!Array.isArray(items) || items.length === 0) {
            list.innerHTML = '<li style="color:#b5e0ff;text-align:center;">No memos</li>';
            return;
          }
          list.innerHTML = items.map(function(item){
            var date = item.publishDate ? new Date(item.publishDate).toISOString().split('T')[0] : '';
            var title = (item.title || 'Untitled').replace(/</g,'&lt;').replace(/>/g,'&gt;');
            return '<li><a href="#" data-id="' + item.id + '">' + title + ' <span style="opacity:0.7;">(' + date + ')</span></a></li>';
          }).join('');

          list.onclick = function(e){
            var a = e.target.closest('a');
            if (!a) return;
            e.preventDefault();
            var id = a.getAttribute('data-id');
            var found = items.find(function(x){ return x.id === id; });
            showDetail(found);
          };
        })
        .catch(function(){
          list.innerHTML = '<li style="color:#b5e0ff;text-align:center;">Failed to load</li>';
        });
    })();
  </script>
</body>
</html>